<div id="editModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:1000;">

    <div style="background:#222; padding:20px; border:1px solid #444; max-width:600px; width:100%; max-height:90vh; overflow-y:auto;">

        <h3>Edit Book</h3>

        <div class="edit-section">

            <h4 onclick="this.parentElement.classList.toggle('collapsed')">Basic Info â–¼</h4>

            <div class="edit-section-content">

                <label>Title: <input type="text" id="editTitle" style="width:100%;"></label><br>

                <label>Author: <input type="text" id="editAuthor" style="width:100%;"></label><br>

                <label>Series: <input type="text" id="editSeries" style="width:100%;"></label><br>

                <label>Series #: <input type="number" id="editSeriesNumber" step="0.1" style="width:140px;"></label><br>

                <label>Pages: <input type="number" id="editPages"></label><br>

                <label>Year: <input type="number" id="editYear"></label><br>

                <label>Date Added: <input type="date" id="editDateAdded"></label><br>

                <label>Rating (0-5): <input type="number" id="editRating" min="0" max="5"></label><br>

                <label>Favourite book: <input type="checkbox" id="editFavourite"></label><br>

                <label id="favSeriesLabel">Favourite series: <input type="checkbox" id="editFavouriteSeries"></label><br>

            </div>

        </div>

        <div class="edit-section">

            <h4 onclick="this.parentElement.classList.toggle('collapsed')">Metadata â–¼</h4>

            <div class="edit-section-content">

                <label>Language: <input type="text" id="editLanguage" style="width:100%;"></label><br>

                <label>Country: <input type="text" id="editCountry" style="width:100%;"></label><br>

                <label>Genre: <input type="text" id="editGenre" style="width:100%;"></label><br>

                <label>Tags (comma separated): <input type="text" id="editTags" style="width:100%;"></label><br>

                <label>Shelves (comma separated): <input type="text" id="editShelves" style="width:100%;"></label><br>

                <label>Status:

                    <select id="editExclusiveShelf">

                        <option value="read">read</option>

                        <option value="currently-reading">currently-reading</option>

                        <option value="to-read">to-read</option>

                        <option value="dnf">dnf</option>

                    </select>

                </label><br>

            </div>

        </div>

        <div class="edit-section">

            <h4 onclick="this.parentElement.classList.toggle('collapsed')">Reads / Re-reads â–¼</h4>

            <div class="edit-section-content">

                <div id="readsList"></div>

                <button id="addReadBtn">+ Add Read</button>

                <p style="font-size:0.85em; color:#aaa; margin-top:8px;">

                    Read count is auto-calculated from finished reads.<br>

                    Current read (if status = currently-reading) will have start date but no finish date.

                </p>

            </div>

        </div>

        <div class="edit-section">

            <h4 onclick="this.parentElement.classList.toggle('collapsed')">Cover & Notes â–¼</h4>

            <div class="edit-section-content">

                <label>Cover URL: <input type="text" id="editCoverUrl" style="width:100%;"></label>

                <button id="fetchCoverBtn">Auto-fetch from Google Books</button>

                <div style="margin-top:8px;"><img id="coverPreview" style="max-height:250px; max-width:100%; border:1px solid #444;" alt="Cover preview"></div>

                <textarea id="editNotes" placeholder="Notes" style="width:100%; height:100px; resize:vertical; margin-top:12px;"></textarea>

            </div>

        </div>

        <div class="edit-section">

    <h4 onclick="this.parentElement.classList.toggle('collapsed')">Feelings â–¼</h4>

    <div class="edit-section-content">

        <p>Quick emojis for this book:</p>

        <div id="emojiPicker" style="font-size:1.8em; cursor:pointer;">

            ğŸ™‚ ğŸ˜ ğŸ˜ ğŸ˜­ ğŸ˜‚ ğŸ˜¢ ğŸ˜¡ ğŸ¤” ğŸ”¥ â„ï¸ ğŸ§  ğŸ–¤ âœ¨ â¤ï¸ ğŸ¯ ğŸŒ«ï¸ â˜•ï¸

        </div>

        <p>Current: <span id="currentEmojis" style="font-size:1.6em;"></span></p>

     <label style="display:block; margin-top:8px;">

    ğŸ“ Page for next emoji: <input type="number" id="emojiPageInput" min="1" placeholder="e.g. 150" style="width:120px;">

    <small style="display:block; margin-top:4px; color:#666;">Click emoji to remove â€¢ Or enter page before clicking to add with page</small>

     </label>

    </div>

</div>

 <div class="edit-section">

    <h4 onclick="this.parentElement.classList.toggle('collapsed')">Quotes & Highlights â–¼</h4>

     <div class="edit-section-content">

        <div id="quotesList"></div>

        <button id="addQuoteBtn">+ Add Quote</button>

        <p style="font-size:0.85em; color:#aaa; margin-top:8px;">

            Add memorable passages, thoughts, or highlights. Optional page/date/favorite.

        </p>

    </div>

 </div>

        <div class="modal-footer">

            <button id="removeBook" class="danger">Remove</button>

            <div class="modal-actions-right">

                <button id="saveEdit">Save</button>

                <button id="closeEdit">Close</button>

            </div>

        </div>

    </div>

</div>

</div>
